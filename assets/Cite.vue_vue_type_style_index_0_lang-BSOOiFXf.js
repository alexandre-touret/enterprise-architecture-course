import{d as D,t as c,D as F,o as t,b as i,x as u,g as a,A as b,F as w,ad as N}from"./modules/vue-pvELL8Tm.js";import{c as o}from"./CiteEngine-Wa1uMVx2.js";import{u as A}from"./slidev/context-CvG8_F3O.js";import"./index-CYzrMnem.js";const L=["title"],M={key:1,class:"biblio_ref"},O={key:2,class:"biblio_foot"},V={class:"biblio_foot_elm"},$={key:0,class:"biblio_id"},j={key:1,class:"biblio_shortref"},q={key:2,class:"biblio_fullref"},J=D({__name:"Cite",props:{bref:{type:String,default:null},input:{type:String,default:null}},setup(C){var k;const{$slidev:S,$route:R,$frontmatter:d}=A(),m=R.no,p=C,v=c(""),s=c(""),h=c("");let l={...o.default_config,...(k=S.configs)==null?void 0:k.biblio,...d==null?void 0:d.biblio};const _=c(l.tooltips),f=B(),E=l.show_id||(f==="short"||l.numerical_ref)&&(l.show_id??!0);let g=o.add(p.bref,m,p.input);function B(){let e=l.footnotes;return e==!0&&(e="short"),e==!1&&(e="none"),e}function y(){if(!o.state.is_init)return;if(g==null){s.value="(#Noid)";return}const e=o.get(g);!("cite_id"in e)?(s.value="(#RefErr)",v.value=p.bref+": ERROR ref not found",_.value=!0):(s.value=e.cite_id,v.value=e.full_bib,_.value=l.tooltips);let n=o.get_allbibinpage(m);Math.min(...n[0])===e.idx&&(h.value=n[1].map(r=>o.get(r)).filter(r=>r==null?void 0:r.id))}return F(o.state.version,(e,x)=>{y()}),o.init().then(e=>{y()}),(e,x)=>(t(),i(w,null,[s.value&&_.value?(t(),i("a",{key:0,class:"biblio_tooltips",title:v.value},u(s.value),9,L)):a("v-if",!0),s.value&&!_.value?(t(),i("span",M,u(s.value),1)):a("v-if",!0),h.value!==""&&b(f)!="none"?(t(),i("div",O,[(t(!0),i(w,null,N(h.value,n=>(t(),i("li",V,[b(E)?(t(),i("span",$,u(n.cite_id)+" : ",1)):a("v-if",!0),b(f)==="short"?(t(),i("span",j,u(n.short_bib),1)):a("v-if",!0),b(f)==="full"?(t(),i("span",q,u(n.full_bib),1)):a("v-if",!0)]))),256))])):a("v-if",!0)],64))}});export{J as _};
